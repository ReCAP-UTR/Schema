syntax = "proto3";

package arg_services.graph.v1;
option java_package = "de.uni_trier.recap.arg_services.graph.v1";
import "google/protobuf/timestamp.proto";
import "google/protobuf/struct.proto";

message Metadata {
  google.protobuf.Timestamp created = 1;
  google.protobuf.Timestamp updated = 2;
}

message Graph {
  // string id = 1;
//   map<string, AtomNode> atom_nodes = 2;
//   map<string, SchemeNode> scheme_nodes = 3;
  map<string, Node> nodes = 2;
  map<string, Edge> edges = 3;
  string major_claim = 4;
  repeated Analyst analysts = 5;
  map<string, Resource> resources = 6;
  google.protobuf.Struct userdata = 7;
  Metadata metadata = 8;
  string version = 9;
  // string primary_resource = 10;
}

message Analyst {
  // string id = 1;
  string name = 2;
  string email = 3;
  google.protobuf.Struct userdata = 4;
  Metadata metadata = 5;
}

message Resource {
  // string id = 1;
  string text = 2;
  google.protobuf.Struct userdata = 3;
  string title = 4;
  string source = 5;
  google.protobuf.Timestamp timestamp = 6;
  Metadata metadata = 7;
}

message Edge {
  // string id = 1;
  string source = 2;
  string target = 3;
  google.protobuf.Struct userdata = 4;
  Metadata metadata = 5;
}

message Node {
  // string id = 1;
  oneof node {
    AtomNode atom = 2;
    SchemeNode scheme = 3;
  }
  google.protobuf.Struct userdata = 4;
  Metadata metadata = 5;
}

message AtomNode {
  string text = 2;
  Anchor anchor = 3;
}

message SchemeNode {
  SchemeType type = 2;
  string argumentation_scheme = 3;
  google.protobuf.Struct descriptors = 4;
}

// enum NodeType {
//   NODE_TYPE_UNSPECIFIED = 0;
//   NODE_TYPE_ATOM = 1;
//   NODE_TYPE_SCHEME = 2;
//   NODE_TYPE_SUPPORT = 2;
//   NODE_TYPE_ATTACK = 3;
//   NODE_TYPE_MA = 4;
//   NODE_TYPE_TA = 5;
//   NODE_TYPE_PA = 6;
//   NODE_TYPE_YA = 7;
// }

enum SchemeType {
  SCHEME_TYPE_UNSPECIFIED = 0;
  SCHEME_TYPE_SUPPORT = 1;
  SCHEME_TYPE_ATTACK = 2;
  SCHEME_TYPE_REPHRASE = 3;
  SCHEME_TYPE_TRANSITION = 4;
  SCHEME_TYPE_PREFERENCE = 5;
  SCHEME_TYPE_ASSERTION = 6;
}

message Anchor {
  // string id = 1;
  string resource = 2;
  int64 offset = 3;
  string text = 4;
  google.protobuf.Struct userdata = 5;
  Metadata metadata = 6;
}
